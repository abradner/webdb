#container_page_header.wrapper.clearfix
  #container_page_title
    -#TODO real, neat breadcrumb
    %h1.title #{link_to @system.name, system_path(@system)} > #{@data_object.name}

  #container_page_buttons.right
    -if can? :admin, User
      =button_link_to "Edit", edit_system_data_object_path(@system), :remote => true
      =button_link_to "Delete", system_data_object_path, :method => "delete",
                            :confirm =>"Are you sure you want to delete this Data Object and all related data?",
                            :id => 'data_object_delete_link', :class => 'red'

  #container_page_details.right.flushright.details
    .entry
      %p
        Info 1:
        =0

    .entry
      %p
        Info 2:
        =0

#container_page_actions.wrapper
  .unit
    =button_link_to "X Import", "#", :class => ""
    =button_link_to "X Metadata", "#", :class => ""
    =button_link_to "X Data Analysis", "#", :class => "data_analysis"
    -#=button_link_to "Manage File Types", system_data_object_file_types_path(@system, @data_object), :class => "file_type"
    -#=button_link_to "Manage Security", system_data_object_security_settings_path(@system, @data_object), :class => "security_group"
    =button_link_to "Manage Dataset Links", system_data_object_data_object_relationships_path(@system, @data_object), :class => "data_object_links"


-# TODO: WORST CODE EVER!
#container_page_content.wrapper
  .unit.system_left_col
    %h3 External Data Relationships
    .row.information
      %span.bold Linked Data Objects:
      %ul
        - @data_object.relatives.each do |rel|
          %li=link_to rel.name, system_data_object_path(@system, rel)
      %span.bold Data Objects Linking to this:
      %ul
        - @data_object.inverse_relatives.each do |irel|
          %li=link_to irel.name, system_data_object_path(@system, irel)

  .unit.system_left_col
    %h3 Security:
    .row.information
      - if @data_object.security_groups.blank?
        .bold
          No Security Groups Defined
      - @data_object.security_groups.each do |sg|
        %p=sg.name
  .unit.system_left_col
    %h3 R
    .row.information
      - @data_object.data_object_security_groups.each do |sg|
        %p=sg.read? ? "Y" :"N"
  .unit.system_left_col
    %h3 W
    .row.information
      - @data_object.data_object_security_groups.each do |sg|
        %p=sg.write? ? "Y" :"N"
  .unit.system_left_col
    %h3 A
    .row.information
      - @data_object.data_object_security_groups.each do |sg|
        %p=sg.admin? ? "Y" :"N"

  .lastUnit.system_right_col
    .left.line
      %h3 System Information:
    .information
      %span.bold Summary:
      %p=@data_object.short_description
    - if @data_object.description.present?
      .information
        %span.bold Full Description:
        %p=@data_object.description

-#TODO Move this
- cols = Array.new
- @data_object.data_object_attributes.each do |attr|
  - if attr.column.present?
    -cols[attr.column] = attr



#container_page_content.wrapper
  %h2 Contents
  %span
    %table{:width => "100%"}
      %tr
        - @data_object.display_columns.times do |n|
          %td{:align => "center", :width => "#{100 / @data_object.display_columns}%", "data-id" => n }
            - if cols[n+1].present?
              %h3= cols[n+1].name
            - else
              %h3 Empty Column!
